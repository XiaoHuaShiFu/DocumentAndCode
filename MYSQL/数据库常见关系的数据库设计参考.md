# 数据库常见关系的数据库设计参考

# 1、标签（文章、帖子、视频等）

1. 方案1

   - 设计原理：

   - 表设计

     ①tag表

     - id //主键ID
     - name //tag内容
     - num //当前Tag的引用个数

     ②文章表

     - id //主键ID
     - title //文章标题
     - tags //tags列表，多个以“,”分割
     - tag_ids //tags的id 多个以“,”分割

   - 优点

     ①此种方式tag标签主要内容保存在文章表中，对于tag表的压力较小，只是添加的时候更新一下tag的引用数量。

   - 缺点

     ①查询的时候效率不足。

2. **方案2**

   - 设计原理：使用2个Tag表，其中一个保存Tag信息，另一个保存映射信息。

   - 表设计

     ①tag表

     - id //主键id
     - name //tag内容
     - num //当前Tag的引用个数

     ②tag_article_map表

     - t_id //标签id
     - a_id //文章id

     ③article表

     - id //主键id
     - title //标题
     - tags ///tags列表，多个以“,”分割

   - 优点

     ①这种形式，每次发布内容和修改内容的时候都去更新一下tag表和 tag_article_map表。

     ②查询的时候需要从tag_article_map表中查找响应的文章id，然后使用文章id去查询具体的文章信息，因为每次查询都是使用索引，所以效率较高。

3. **方案3**

   - 设计原理：基本结构同方案2，只是在tag表和tag_article_map表中使用mongo/redis这样的nosql数据库服务器，这样可以发挥nosql数据库强大的线性查询能力。

   - 文档设计

     ①第一种方式：表结构设计与方案2完全相同，只是数据库服务器换了。

     ②第二种方式：发挥Nosql的线性能力来设计存储的Key，尤其是使用redis的时候，使用的Key**的结构可以完美的提高查询效率**